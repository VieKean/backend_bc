<div class="container mt-5">

    <!-- Product Table -->
    <% if (Array.isArray(data.rows) && data.rows.length > 0) { %>
        <h2>Product List By Category: <%= data.category %></h2> <!-- Hiển thị tên category ở đây -->
        <table class="table table-hover table-bordered">
            <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Product Name</th>
                    <th scope="col">Price</th>
                    <th scope="col">Quantity</th>
                    <th scope="col">Image</th>
                    <th scope="col">Description</th>
                    <th scope="col">Action</th>
                </tr>
            </thead>
            <tbody>
                <% for (let i = 0; i < data.rows.length; i++) { 
                    const product = data.rows[i]; 
                %>
                    <tr>
                        <th scope="row"><%= i + 1 %></th>
                        <td><%= product.product_name %></td>
                        <td><%= product.price %></td>
                        <td><%= product.quantity %></td>
                        <td>
                            <img src="<%= product.image || '/default-image.png' %>" 
                                 alt="<%= product.product_name %>" 
                                 width="100">
                        </td>
                        <td><%= product.description %></td>
                        <td>
                            <a href="/product/edit/<%= product.id %>" class="btn btn-warning btn-sm">Edit</a>
                            <button type="button" 
                                class="btn btn-danger btn-sm delete-btn" 
                                data-bs-toggle="popover"
                                data-bs-html="true" 
                                data-product-id="<%= product.id %>"
                                data-bs-content=" 
                                    <div class='popover-content'>
                                        <p>Are you sure you want to delete this product?</p>
                                        <div class='d-flex justify-content-between'>
                                            <button type='button' class='btn btn-secondary btn-sm cancel-delete'>Cancel</button>
                                            <button type='button' class='btn btn-danger btn-sm confirm-delete' data-id='<%= product.id %>'>Delete</button>
                                        </div>
                                    </div>
                                "
                                title="Confirm Delete">
                                Delete
                            </button>
                        </td>
                    </tr>
                <% } %>
            </tbody>
        </table>
    <% } else { %>
        <p class="text-center">No products available</p>
    <% } %>
</div>
<div>
    <button class="btn btn-secondary" onclick="history.back()">Quay Lại</button>
    

</div>
